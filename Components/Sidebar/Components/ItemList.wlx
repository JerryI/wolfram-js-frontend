Class = $Options["Class"];
Path     = $Options["Path"];
Current  = $Options["Current"];
Level    = $Options["Level"];

Dir  := ImportComponent["ItemDirectory.wlx"];
Fl   := ImportComponent["ItemFile.wlx"];

If[!DirectoryQ[Path], Path = DirectoryName[Path]];

Print[StringJoin["ItemList ", Path]];

With[{
  Ul = Table[
    If[DirectoryQ[i],  
      <li><Dir Level={Level+1} File={i} Selected={SameQ[Current, i]}/></li>,
      <li><Fl  File={i} Selected={SameQ[Current, i]}/></li>
    ]
  , {i, FileNames["*", Path]}]
},
  <ul class="{Class} pl-{Level*2}">
    <Ul/>
  </ul>
]
