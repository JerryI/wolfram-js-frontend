"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[3870],{60028:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var a=n(17624),t=n(4552);const i={sidebar_position:8},r=void 0,l={id:"frontend/Expressions representation",title:"Expressions representation",description:"The aim is to make a compromise between DisplayForm and InputForm representations Wolfram Expressions on the frontend's side.",source:"@site/docs/frontend/Expressions representation.md",sourceDirName:"frontend",slug:"/frontend/Expressions representation",permalink:"/wljs-docs/frontend/Expressions representation",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"WLX",permalink:"/wljs-docs/frontend/Cell types/WLX"},next:{title:"Advanced",permalink:"/wljs-docs/category/advanced"}},o={},c=[{value:"Balancing between InputForm and DisplayFrom",id:"balancing-between-inputform-and-displayfrom",level:2},{value:"For the sake of performance",id:"for-the-sake-of-performance",level:3}];function h(e){const s={a:"a",admonition:"admonition",annotation:"annotation",blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msqrt:"msqrt",ol:"ol",p:"p",path:"path",pre:"pre",semantics:"semantics",span:"span",strong:"strong",svg:"svg",ul:"ul",...(0,t.M)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.p,{children:["The aim is to make a compromise between ",(0,a.jsx)(s.code,{children:"DisplayForm"})," and ",(0,a.jsx)(s.code,{children:"InputForm"})," representations Wolfram Expressions on the frontend's side."]}),"\n",(0,a.jsx)(s.admonition,{type:"note",children:(0,a.jsxs)(s.p,{children:["In Mathematica notebook (",(0,a.jsx)(s.code,{children:"DisplayForm"}),") everything you type becomes a bunch of ",(0,a.jsx)(s.strong,{children:"wrapper functions  being executed on a small WL interpreter"}),", which runs on a java-frontend"]})}),"\n",(0,a.jsx)(s.p,{children:"what user see"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsxs)(s.mfrac,{children:[(0,a.jsx)(s.mn,{children:"1"}),(0,a.jsx)(s.mn,{children:"2"})]})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\frac{1}{2}"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1.1901em",verticalAlign:"-0.345em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(s.span,{className:"mfrac",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"0.8451em"},children:[(0,a.jsxs)(s.span,{style:{top:"-2.655em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"2"})})})]}),(0,a.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(s.span,{style:{top:"-3.394em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:"1"})})})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.345em"},children:(0,a.jsx)(s.span,{})})})]})}),(0,a.jsx)(s.span,{className:"mclose nulldelimiter"})]})]})})]})}),"\n",(0,a.jsx)(s.p,{children:"what it actually is"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-mathematica",children:'Cell[BoxData[FractionBox["1", "2"]], "Input"]\n'})}),"\n",(0,a.jsx)(s.p,{children:"i.e. this is an executable object, written as a sort of computable WL functions."}),"\n",(0,a.jsx)(s.p,{children:"The power of Mathematica's frontend, that it expands and follows the paradigm of WL, where"}),"\n",(0,a.jsxs)(s.blockquote,{children:["\n",(0,a.jsx)(s.p,{children:"Everything is an expression"}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"to all interactive objects, including mostly graphics. It makes you feel like you are still operating a bunch of symbolic expressions underneath it"}),"\n",(0,a.jsxs)(s.blockquote,{children:["\n",(0,a.jsx)(s.p,{children:"Graphics is a syntax sugar"}),"\n"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-mathematica",children:"Cuboid[]//Graphics3D\n% /. {Cuboid :> Sphere}\n"})}),"\n",(0,a.jsx)(s.p,{children:"The idea to reproduce full functionality of Mathematica's frontend in this manner is doomed by a few reasons"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"frontend functions are poorly documented"}),"\n",(0,a.jsx)(s.li,{children:"even with ~30 years of development, Mathematica frontend is quite laggy"}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"Since Mathematica is a paid software, one have to do it from the scratch."}),"\n",(0,a.jsx)(s.h2,{id:"balancing-between-inputform-and-displayfrom",children:"Balancing between InputForm and DisplayFrom"}),"\n",(0,a.jsx)(s.p,{children:"In principle, we do not need to make the whole WL expression to be mutable and interactive. There are only a few cases, where we really need this"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:["Graphics, sliders, buttons and etc - ",(0,a.jsx)(s.strong,{children:"separate objects"})]}),"\n",(0,a.jsxs)(s.li,{children:["Syntax sugar for fractions, square roots, matrixes and etc. - ",(0,a.jsx)(s.strong,{children:"mixed"})]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.em,{children:"The first one"})," (",(0,a.jsx)(s.strong,{children:"separate objects"}),") can be even separated from the actual code-area, since it originally works as inline block (a symbol or an atom)."]}),"\n",(0,a.jsx)(s.p,{children:"In the simples case one could just replace graphic objects with images (svgs) and substitute it to some advanced HTML-like editor, like a lot people did before"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Jupyter"}),"\n",(0,a.jsx)(s.li,{children:"Wolfram Notebook VS Code extension"}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["Anyway, since ",(0,a.jsx)(s.code,{children:"Plot"})," and ",(0,a.jsx)(s.code,{children:"Plot3D"})," is a superset of ",(0,a.jsx)(s.code,{children:"Graphics"})," and ",(0,a.jsx)(s.code,{children:"Graphics3D"})," symbols with a recipe inside made from other symbols, one need to cook it and display to the user, i.e. ",(0,a.jsx)(s.strong,{children:"we need a frontend WL interpreter for sure"}),". Since the portability is great - we should use web-stack, where Javascript rules all computations. See ",(0,a.jsx)(s.a,{href:"../../interpreter/intro.md",children:"WLJS Interpreter"})]}),"\n",(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.em,{children:"The second one"})," (",(0,a.jsx)(s.strong,{children:"mixed"}),") is rather tricky to implement fully, since it involves mutable WL expressions."]}),"\n",(0,a.jsxs)(s.p,{children:["However, here also we have a solution. Nowadays developers are using sort-of syntax sugar for the live previews of Markdown, where the code you typing is replaced by the corresponding styled object. A good example is Obsidian - notes making app based on CodeMirror 6 Decorations. Which will require to write a WL tokenizer inside the editor. TL-DR see ",(0,a.jsx)(s.a,{href:"Outdated/Development/Decorations.md",children:"Decorations"})]}),"\n",(0,a.jsx)(s.h3,{id:"for-the-sake-of-performance",children:"For the sake of performance"}),"\n",(0,a.jsxs)(s.p,{children:["For the most cases there is no point in interpreting the whole output expression.\nLets have a look at the ",(0,a.jsx)(s.code,{children:"DisplayForm"})," output from Mathematica or Wolfram Engine for\n",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsx)(s.mrow,{children:(0,a.jsxs)(s.mfrac,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"a"}),(0,a.jsx)(s.mo,{children:"\xd7"}),(0,a.jsx)(s.mi,{children:"b"})]}),(0,a.jsx)(s.msqrt,{children:(0,a.jsx)(s.mn,{children:"2"})})]})}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\frac{a\\times b}{\\sqrt{2}}"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1.4181em",verticalAlign:"-0.538em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mopen nulldelimiter"}),(0,a.jsx)(s.span,{className:"mfrac",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"0.8801em"},children:[(0,a.jsxs)(s.span,{style:{top:"-2.551em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord sqrt mtight",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsxs)(s.span,{className:"vlist",style:{height:"0.9128em"},children:[(0,a.jsxs)(s.span,{className:"svg-align",style:{top:"-3em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"mord mtight",style:{paddingLeft:"0.833em"},children:(0,a.jsx)(s.span,{className:"mord mtight",children:"2"})})]}),(0,a.jsxs)(s.span,{style:{top:"-2.8728em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"hide-tail mtight",style:{minWidth:"0.853em",height:"1.08em"},children:(0,a.jsx)(s.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice",children:(0,a.jsx)(s.path,{d:"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z"})})})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.1272em"},children:(0,a.jsx)(s.span,{})})})]})})})})]}),(0,a.jsxs)(s.span,{style:{top:"-3.23em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),(0,a.jsxs)(s.span,{style:{top:"-3.394em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"3em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsxs)(s.span,{className:"mord mtight",children:[(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"a"}),(0,a.jsx)(s.span,{className:"mbin mtight",children:"\xd7"}),(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"b"})]})})]})]}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.538em"},children:(0,a.jsx)(s.span,{})})})]})}),(0,a.jsx)(s.span,{className:"mclose nulldelimiter"})]})]})})]})]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-mathematica",children:'FractionBox[RowBox[{"a", " ", "b"}], SqrtBox["2"]]\n'})}),"\n",(0,a.jsxs)(s.p,{children:["what we would like to simplify here - ",(0,a.jsx)(s.strong,{children:"keep the actual code"})]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-mathematica",children:"(*FractionBox[*)a b(*|*)/(*|*)(*SqrtBox[*)Sqrt[2](*]SqrtBox*)(*]FractionBox*)\n"})}),"\n",(0,a.jsx)(s.p,{children:"It does look a bit more complicated, but if you just remove all comments"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-mathematica",children:"a b / Sqrt[2]\n"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["you can copy your cell's text to any WL parsers, use it with ",(0,a.jsx)(s.code,{children:"wolframscript"})," with no changes made!"]}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.strong,{children:"it does not affect the code structure"})}),"\n",(0,a.jsxs)(s.li,{children:["it has all markers for the editor (",(0,a.jsx)(s.strong,{children:"no need to parse WL on client's side"}),"), that makes all process of writing equations much safer"]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["It has a big impact on the performance (in a good way), especially while working with matrixes.\xa0",(0,a.jsx)(s.code,{children:"InterpretationBox"}),"\xa0and other sweet tools are supported in a similar way using comments."]})]})}function d(e={}){const{wrapper:s}={...(0,t.M)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},4552:(e,s,n)=>{n.d(s,{I:()=>l,M:()=>r});var a=n(11504);const t={},i=a.createContext(t);function r(e){const s=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),a.createElement(i.Provider,{value:s},e.children)}}}]);