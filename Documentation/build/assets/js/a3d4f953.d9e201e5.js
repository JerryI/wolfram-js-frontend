"use strict";(self.webpackChunkwlx_docs=self.webpackChunkwlx_docs||[]).push([[5024],{49700:(M,e,n)=>{n.r(e),n.d(e,{assets:()=>a,contentTitle:()=>T,default:()=>D,frontMatter:()=>i,metadata:()=>c,toc:()=>t});var N=n(17624),s=n(4552);const i={env:["Wolfram Kernel"]},T=void 0,c={id:"frontend/Reference/Dynamics/Offload",title:"Offload",description:"Holds (or offloads) an expression to be evaluated on frontend (WLJS)",source:"@site/docs/frontend/Reference/Dynamics/Offload.md",sourceDirName:"frontend/Reference/Dynamics",slug:"/frontend/Reference/Dynamics/Offload",permalink:"/wljs-docs/frontend/Reference/Dynamics/Offload",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{env:["Wolfram Kernel"]},sidebar:"tutorialSidebar",previous:{title:"Manipulate",permalink:"/wljs-docs/frontend/Reference/Dynamics/Manipulate"},next:{title:"Graphics",permalink:"/wljs-docs/frontend/Reference/Graphics/"}},a={},t=[{value:"Examples",id:"examples",level:2},{value:"Dynamics",id:"dynamics",level:3},{value:"Force WL Kernel to offload an expression",id:"force-wl-kernel-to-offload-an-expression",level:3},{value:"Dev notes",id:"dev-notes",level:2}];function j(M){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.M)(),...M.components},{Wl:n}=e;return n||function(M,e){throw new Error("Expected "+(e?"component":"object")+" `"+M+"` to be defined: you likely forgot to import, pass, or provide it.")}("Wl",!0),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(e.p,{children:"Holds (or offloads) an expression to be evaluated on frontend (WLJS)"}),"\n",(0,N.jsx)(e.pre,{children:(0,N.jsx)(e.code,{className:"language-mathematica",children:"Offload[expr_]\n"})}),"\n",(0,N.jsxs)(e.p,{children:["It has ",(0,N.jsx)(e.code,{children:"HoldFirst"})," attribute."]}),"\n",(0,N.jsx)(e.admonition,{type:"info",children:(0,N.jsxs)(e.p,{children:["Please, see the tutorial ",(0,N.jsx)(e.a,{href:"/wljs-docs/frontend/Tutorial/Dynamics",children:"Dynamics"})]})}),"\n",(0,N.jsx)(e.h2,{id:"examples",children:"Examples"}),"\n",(0,N.jsx)(e.h3,{id:"dynamics",children:"Dynamics"}),"\n",(0,N.jsx)(e.p,{children:"Typical example for the dynamic evaluation"}),"\n",(0,N.jsx)(e.pre,{children:(0,N.jsx)(e.code,{className:"language-mathematica",children:"pts = RandomReal[{-1,1}, {64, 2}];\nGraphics[{PointSize[0.02], Point[pts // Offload]}, ImageSize->500]\n"})}),"\n",(0,N.jsx)(n,{data:"WyJHcmFwaGljcyIsWyJMaXN0IixbIlBvaW50U2l6ZSIsMi4wZS0yXSxbIlBvaW50IixbIk9mZmxv\nYWQiLFsiTGlzdCIsWyJMaXN0IiwtMC4yNzAzNjMzNjY2NDY3MTA5LDAuMjc3NzIzNTE4NTQ3NjM0\nMV0sWyJMaXN0IiwwLjk4MzQ1ODczMDUyNjIyMzIsLTAuMzk1MjE0Njk2MjQ1MTEyNF0sWyJMaXN0\nIiwwLjg2MTc0MzQ4ODIzNzU3OTgsLTAuNjI0MTY0OTk1NjkyMzk4M10sWyJMaXN0IiwtMC43MTk1\nNDgzMTYyNDM2MjY5LC0wLjk5MTY4MjU0MTk3ODAwNjRdLFsiTGlzdCIsLTAuMzM1MjYwMDI4OTgx\nODc0MSwtMC43MjA0NjE0MzYzMDYyNDk2XSxbIkxpc3QiLDAuNjAxNzk3NDgzMzkyMTYxMywwLjk1\nNDI4OTkyMzk0MTQ3NDJdLFsiTGlzdCIsNi41MTA1MDAwOTg2NTYyOGUtMywwLjE3MjA5NTg4MjE5\nNTA4MTU0XSxbIkxpc3QiLC0wLjUwOTg5MTE1MDE2MDE5NzcsMC4yMjAzMDk1Nzc1ODM2MjU2OF0s\nWyJMaXN0IiwtMC4xNjg3OTgxMzA2MjU3OTUzLDAuMTg0OTAwODcwMTE2ODUxNzVdLFsiTGlzdCIs\nMC41ODUwMDcwMzUwMjQ5NDc0LC0wLjk2NjA5NTg3OTY0MTUxXSxbIkxpc3QiLDMuNzUzNTY2ODYz\nNzcwODQxZS0yLDAuNDI3OTUxMjQxNjExNDIyMl0sWyJMaXN0IiwwLjY5OTU5MzQ2NDEzMjgzNSww\nLjM5MTEyMDU0MTA2MTEwMTZdLFsiTGlzdCIsMC45MDg3NjE1MDI2ODE5MjgyLDAuNjE3NTUwNzkx\nMzIwNDY4M10sWyJMaXN0IiwwLjI3MTUwMjMxMjk2Mjc2MzE3LC0wLjMwOTYzNzI4MTUyNjM1OTk0\nXSxbIkxpc3QiLDAuNTM4MDkzOTg2MjU3NDA4NiwtMC4zMDM4ODY3ODk5ODcwNDY3N10sWyJMaXN0\nIiwtMC41Njg5NDk5NTI3MjQ3NjcsMC4xNDkyNTIxNTc0NjI5OTQzNl0sWyJMaXN0IiwwLjk2MTQ0\nNDk3MTIwMTg3MiwwLjczMDkzNDY1ODg1NTUxNDFdLFsiTGlzdCIsLTAuMTU5MjY0ODkyMDc5NDU1\nOTMsLTAuNjEwNDQwNDEyMzA1MDMyNF0sWyJMaXN0IiwtNy45MzY3NjY0MzU2ODczNDhlLTIsMS45\nMzc3ODg2MjE3NjE1MjdlLTJdLFsiTGlzdCIsLTAuNTQwNzQ1ODQyNjAyNDU1NiwwLjIxMDg0MDA4\nMDc4NTQ2NjQ1XSxbIkxpc3QiLDAuNzcyNDQxNzk3MDY1NDYyNywwLjc0MTE0ODczNjQxMzQ2NDNd\nLFsiTGlzdCIsLTAuNjY3NDE3NjAwNDU4MDAxNSwwLjcyMDI1MDU4ODg3Njk4NjhdLFsiTGlzdCIs\nMC4zMDQ3NDUxNTg0NjcwODM1LDAuNjI3MTQ3ODYwNDAyMDUyNl0sWyJMaXN0IiwtMC42MDEzMjE3\nNTYwNzczNDM0LDAuOTk1MzM1NDg5MDk0MjQ5XSxbIkxpc3QiLC0wLjMzNjgxNTQ0NzcxNDk2NDc0\nLDEuOTczOTM4MDMwMDQ5MDE2ZS0yXSxbIkxpc3QiLC0wLjI4MzI2NjAzNzgxODM0MjksMC44MjE5\nNzczMTEzMzQ4MTddLFsiTGlzdCIsLTAuODc5ODI0ODU5NzYyMTgzNCwwLjU0NzY4NDM3MDM3MjA4\nOF0sWyJMaXN0IiwtMC41MzMyMzM1MDc3OTc5ODQ2LDAuOTIyODU2MjA1MTEzNjIwN10sWyJMaXN0\nIiwwLjYwMDQxMjU2MDAxNjczMjUsMC4xMDEzMjgzMzg4MDE3NDQ5N10sWyJMaXN0IiwwLjY2OTM1\nNTExMjkxMTc3MTQsMC4yNDQ1Mjk3MTk3MTQ5MDMyM10sWyJMaXN0IiwtMC41ODYxNjYxMTgzOTk4\nNjI4LDAuMzcyNjM2NTM1MDcwMjM0NzVdLFsiTGlzdCIsLTAuNTgzNTM1NDY3MDIwNTIxMywtMC44\nNzU2OTIzMDQ1MDg1MjFdLFsiTGlzdCIsLTAuNzg2NjgyOTk4NjEzMjcyLDAuNzg5MjA1NDU1MTY3\nNTc1MV0sWyJMaXN0IiwtMC4xOTUxNzI2NTQ1NDEyNTkzMiwwLjkzNjQyOTIyNzk5OTA4MDVdLFsi\nTGlzdCIsMC4xOTg2NjkwMDA5NTM4MTM2OCwtMi41NTM3MTc0NDAxMTg0OTdlLTJdLFsiTGlzdCIs\nMC43NTg4MDc0OTQ3MTcxMjE1LDAuNTI3Nzg4ODc4NTY1NzcyN10sWyJMaXN0IiwwLjg4ODAxOTU5\nOTQ5MjYwNzQsLTAuNzIzNzkzMzc4NTA1NTI3XSxbIkxpc3QiLC0wLjIwMjczMzY5MzQ1ODk3NjMs\nLTAuODQ1MTY3Mzg1ODA3Njc5Nl0sWyJMaXN0IiwtMC45OTYxMzEyOTUwNTA5Mjc4LC0wLjM1NjQy\nMzg5NDI0NjYzXSxbIkxpc3QiLDAuNzgwNzI0ODE1MDUzMjA3OCwwLjIyMDc4ODYyMjc5Mzc2OTY1\nXSxbIkxpc3QiLDAuMjU0Mjg5ODM4OTAxNjI4NiwtMC4zNTQ1MzIzNDY1MTQ1OTQyXSxbIkxpc3Qi\nLC0wLjI3MzMwNjE0NjQ2Mzg3NjQsLTAuMzIzNDkyMTUyODU0NDk2OTVdLFsiTGlzdCIsMC4zNDkx\nNTc5MDYyMTAyNDk5LC0wLjgwODE0OTg1MTA1MTIyMDRdLFsiTGlzdCIsLTAuNjM3NTE0MTQ4MDgz\nOTU3OSwtMC4xMTkyMjk3MjgwMjM2NzcxNV0sWyJMaXN0IiwtMC40OTExNjMxNzgzNzU5OTAyLC0w\nLjMwNjE0MTQ5ODk4NTI1Nl0sWyJMaXN0IiwtMS45NTYyMzA2ODY2MTE3MDRlLTIsMC4xMzYyNjE4\nMTg3OTU4Mjc3N10sWyJMaXN0IiwyLjM2NDc3MTkxNTQ4MzU2NTZlLTMsLTAuODczNzMyODIzNTEz\nMzk3NF0sWyJMaXN0IiwwLjI3NTk2NjEwNjY0NDU2MiwwLjkzNDU5NDQzOTU1NzY0NjldLFsiTGlz\ndCIsLTAuMjY4MjgyMzA3Nzg5ODA0LC0wLjU0MjY3NjQwOTk0OTkxMl0sWyJMaXN0IiwwLjkxMjE1\nODc5NzMwMzM0MjMsMC41OTU1MjEwODM4MDY1Njc3XSxbIkxpc3QiLDAuNDU5OTY2MzgzNzg5MTkx\nNjQsLTAuMTI1NTE3NTk0NjA1OTgyMV0sWyJMaXN0IiwtMC4xMDUwODczMTE0MjY5MzgxNywyLjc4\nOTUxNDQwNDgzMTc3MmUtMl0sWyJMaXN0IiwtMC44NDgyMTM2MzA4MDgxOTk4LC0wLjgyOTM2NDIw\nMTcxODYwNF0sWyJMaXN0IiwwLjcyMTQyNTMwODU3MjU3NTUsMC41MTUxMTM0MTQ2NTk4NjldLFsi\nTGlzdCIsMC4yMDQzMjExNzI2Nzk2MDQ2LDAuODc5OTE4OTU3NzczODMzMV0sWyJMaXN0IiwtMC40\nNTEyNjgxMzAyMDQwNTg4NywtMC40MjU1NDUzNjk1NjMwNTUzM10sWyJMaXN0IiwwLjY3NTE2MDUx\nMjY1MTM0NDUsLTAuMjA1MDU3OTc4MDc4NjA0MzddLFsiTGlzdCIsLTAuMTUxMzMwODkyNzk1NTky\nNzUsLTAuODU2OTA0OTM3MDExNDM4OF0sWyJMaXN0IiwwLjI3MzAyODQyNjc1NTY2OTEsMC40NzQ3\nMDcyMDMyOTA0MDQ1XSxbIkxpc3QiLC0wLjkxMTUzNDk4ODg5ODY3NjMsLTAuMTg5NzIxMTIxOTYz\nMzIxMjVdLFsiTGlzdCIsMS42MzMzMDMxMDk4MjAwODM0ZS0yLC0wLjY5MjczNzAwMTM1ODQyMzNd\nLFsiTGlzdCIsLTAuOTk0OTExNDQ1Nzg3NTQ0MywtMC4zMjc5NzMzODgxODY2MjIwM10sWyJMaXN0\nIiwtNC4yNzUzNTMyNjI5NzQ4NTdlLTIsMC44NzU2MTk1Mjc1ODg2MTg1XSxbIkxpc3QiLDAuNTU4\nNTQyMzI0ODE2MDk2Myw1LjQ1NTA1NjI0OTA4Njg4N2UtMl1dXV1dLFsiUnVsZSIsIkltYWdlU2l6\nZSIsNTAwXV0=\n",children:"Graphics[{PointSize[0.02], Point[RandomReal[{-1,1}, {64, 2}] // Offload]}, ImageSize->500]"}),"\n",(0,N.jsx)(e.p,{children:"And then, change the variable from the separate task"}),"\n",(0,N.jsx)(e.pre,{children:(0,N.jsx)(e.code,{className:"language-mathematica",children:"task = SetInterval[With[{},\n  pts = (# + 0.001 Sum[\n    (i - #)/(Norm[i - #]^3 + 0.1) - (i - #)/(Norm[i - #]^5 + 0.1)\n  , {i, pts}]) &/@ pts;\n], 100]\n"})}),"\n",(0,N.jsx)(e.p,{children:"Don't forget to remove it afterwards"}),"\n",(0,N.jsx)(e.pre,{children:(0,N.jsx)(e.code,{className:"language-mathematica",children:"TaskRemove[task]\n"})}),"\n",(0,N.jsx)(e.h3,{id:"force-wl-kernel-to-offload-an-expression",children:"Force WL Kernel to offload an expression"}),"\n",(0,N.jsxs)(e.p,{children:["Looking back to the previous example, the function  ",(0,N.jsx)(e.a,{href:"../WLJS/RandomReal.md",children:(0,N.jsx)(e.code,{children:"RandomReal"})})," implemented on both sides. If you offload it to the ",(0,N.jsx)(e.code,{children:"Point"})," expression"]}),"\n",(0,N.jsx)(e.pre,{children:(0,N.jsx)(e.code,{className:"language-mathematica",children:"Graphics[{PointSize[0.02], Point[RandomReal[{-1,1}, {64, 2}] // Offload]}]\n"})}),"\n",(0,N.jsx)(e.p,{children:"Each time you load a notebook the distribution of the point will be different, since it reevaluate it on frontend's side each time."}),"\n",(0,N.jsx)(e.h2,{id:"dev-notes",children:"Dev notes"}),"\n",(0,N.jsx)(e.p,{children:"The actual implementation of the expression is extremely simple"}),"\n",(0,N.jsx)(e.pre,{children:(0,N.jsx)(e.code,{className:"language-mathematica",children:"SetAttributes[Offload, HoldFirst]\n"})}),"\n",(0,N.jsx)(e.pre,{children:(0,N.jsx)(e.code,{className:"language-js",children:"core.Offload = async (args, env) => {\n\treturn await intepretate(args[0], env)\n}\ncore.Offload.update = core.Offload\ncore.Offload.destroy = core.Offload\n"})}),"\n",(0,N.jsxs)(e.p,{children:["The difference from ",(0,N.jsx)(e.code,{children:"Hold"})," is that it will not be affected by ",(0,N.jsx)(e.code,{children:"ReleaseHold"}),"."]})]})}function D(M={}){const{wrapper:e}={...(0,s.M)(),...M.components};return e?(0,N.jsx)(e,{...M,children:(0,N.jsx)(j,{...M})}):j(M)}},4552:(M,e,n)=>{n.d(e,{I:()=>c,M:()=>T});var N=n(11504);const s={},i=N.createContext(s);function T(M){const e=N.useContext(i);return N.useMemo((function(){return"function"==typeof M?M(e):{...e,...M}}),[e,M])}function c(M){let e;return e=M.disableParentContext?"function"==typeof M.components?M.components(s):M.components||s:T(M.components),N.createElement(i.Provider,{value:e},M.children)}}}]);