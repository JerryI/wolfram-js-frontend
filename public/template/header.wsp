<html><head lang="en">
        <meta charset="utf-8">

        <?wsp Table[ ?> 
            <link rel="stylesheet" href="/<?wsp i // FileNameToURLPath ?>">
        <?wsp , {i, Includes["styles"]}]?>

        <!-- any inline js including core library (global) UPD: No longer exists -->
        <?wsp Table[ ?> 
            <script>
            <?wsp Import[FileNameJoin[{"Packages", i}], "String"] ?>
            </script>
        <?wsp , {i, Includes["js"]}]?>
 
        
        <!-- user's plugins (module) -->
        <?wsp Table[ ?> 
            <script type="module" src="/<?wsp i // FileNameToURLPath ?>"></script>
        <?wsp , {i, Includes["jsmodule"]}]?> 

        <!-- connection to the server (global) -->
        <script src="/dist/sockets.js" type="module"></script>


        <!-- editors autocomplete -->
        <?wsp Table[ ?> 
            <script type="module" src="/<?wsp i // FileNameToURLPath ?>"></script>
        <?wsp , {i, Includes["autocomplete"]}]?>   
        
        <script type="module">
            function isElectron() {
                // Renderer process
                if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {
                    return true;
                }
            
                // Main process
                if (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {
                    return true;
                }
            
                // Detect the user agent when the `nodeIntegration` option is set to true
                if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {
                    return true;
                }
            
                return false;
            }  

            function ifLinux() {
                if (navigator.appVersion.indexOf("X11") != -1) return true;
                if (navigator.appVersion.indexOf("Linux") != -1) return true;

                return false;
            }
            
            if (!isElectron() || ifLinux()) {
                document.body.style.background = "var(--topbar-background)";
            }
        </script>

    </head>
    <body class="notion-body">
        <div id="notion-app">
            <div class="notion-app-inner notion-light-theme" style="">
                <div style="">
                    <div class="notion-cursor-listener" style="">
                        <?wsp LoadPage["template/modal.wsp"] ?>

                        <?wsp If[MissingQ[$CurrentRequest["Query", "zen"]], ?>
                        <div class="notion-sidebar-container" style="">
                            <div style="">
                                <div style="">
                                    <?wsp LoadPage["template/sidebar.wsp"] ?>
                                </div>
                            </div>
                        </div>
                        <?wsp , ""] ?>

                        <div class="" style="width: 100%;">
                            <div>
                                
                            </div>
                                
                         
        <div class="notion-frame <?wsp If[MissingQ[$CurrentRequest["Query", "zen"]], "", " notion-frame-extended"] ?>" style="">